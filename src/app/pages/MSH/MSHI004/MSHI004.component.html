<nz-content style="margin: 0 16px">
  <nz-breadcrumb style="margin: 16px 0">
    <nz-breadcrumb-item>工廠排程</nz-breadcrumb-item>
    <nz-breadcrumb-item>排序設定</nz-breadcrumb-item>
    <nz-breadcrumb-item>啟動發佈模式</nz-breadcrumb-item>
  </nz-breadcrumb>

  <nz-spin nzTip="Loading..." [nzSize]="'large'" [nzSpinning]="isSpinning">
    <div class="flex">
      <button (click)="serach(true)" nz-button nzType="primary">
        <span nz-icon nzType="search" nzTheme="outline"></span>查詢
      </button>

      <button
        style="float: right; margin-left: 20px"
        (click)="confirm(true)"
        nz-button
        nzType="primary"
      >
        <span nz-icon nzType="check-circle" nzTheme="outline"></span>儲存
      </button>

      <button
        style="
          float: right;
          margin-left: 20px;
          border-color: #ff3460;
          background: #ff3460;
        "
        (click)="runFcp()"
        nz-button
        nzType="primary"
      >
        <span nz-icon nzType="caret-right" nzTheme="outline"></span>重啟FCP
      </button>
    </div>

    <div class="flex">
      <span
        style="
          width: 80px;
          height: 25px;
          font-size: 16px;
          background-color: rgb(156, 182, 206);
          font-weight: bold;
          border-radius: 5px;
          text-align: center;
        "
        >FCP版本</span
      >
      <nz-select
        nzPlaceHolder="請選擇版本"
        style="width: 210px; margin-left: 20px"
        [(ngModel)]="shopCodeInputList"
        nzAllowClear
        (nzOpenChange)="getFcpList()"
      >
        <nz-option
          *ngFor="let shopCode of shopCodeOfOption"
          [nzLabel]="shopCode"
          [nzValue]="shopCode"
        ></nz-option>
        <nz-option *ngIf="shopCodeLoading" nzDisabled nzCustomContent>
          <span nz-icon nzType="loading" class="loading-icon"></span>
          版本清單載入中...
        </nz-option>
      </nz-select>
    </div>

    <ag-grid-angular
      style="width: 100%; height: 510px; margin-bottom: 30px; margin-top: 25px"
      class="ag-theme-alpine"
      [rowData]="MSHI004DataList"
      [columnDefs]="columnDefs"
      [gridOptions]="gridOptions"
      [pagination]="true"
      [paginationPageSize]="20"
    >
    </ag-grid-angular>

    <ag-grid-angular
      style="width: 100%; height: 180px"
      class="ag-theme-alpine"
      [rowData]="machineDataList"
      [columnDefs]="machine"
      [gridOptions]="gridOptions"
    >
    </ag-grid-angular>
  </nz-spin>
</nz-content>

<nz-modal
  [(nzVisible)]="isVisibleConvert"
  [nzTitle]="convertTitle"
  [nzContent]="PlanSetContent"
  [nzFooter]="null"
  [nzWidth]="1000"
  (nzOnCancel)="convertCancel()"
>
  <ng-container>
    <ng-template #convertTitle>轉入公版</ng-template>
    <ng-template #PlanSetContent>
      <table>
        <tr>
          <th>版本</th>
          <td>
            &nbsp;&nbsp;&nbsp;&nbsp;
            <span style="width: 20%; color: darkblue">{{ normFcp }}</span>
          </td>
        </tr>

        <!-- <tr>
      <th>機台平衡策略</th>
      <td>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <nz-radio-group
          [(ngModel)]="machineValue"
          (click)="changeValue('machineValue')"
        >
          <label nz-radio nzValue="1">機台平均</label>
          <label nz-radio nzValue="2">派工狀況</label>
        </nz-radio-group>
      </td>
    </tr>

    <tr>
      <th>FCP下站合併天數</th>
      <!-- 解決前後違反問題 -->
        <!-- <td>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <nz-input-number
          nzPlaceHolder="天數"
          [(ngModel)]="FROZAN_GROUP"
          [nzMin]="0"
          [nzMax]="10000"
          [nzStep]="1"
        ></nz-input-number>
      </td>
    </tr> -->

        <tr>
          <button
            nz-button
            nzType="primary"
            class="opButton"
            (click)="convertSubmit()"
          >
            送出
          </button>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <button
            nz-button
            nzType="primary"
            class="opButton"
            (click)="convertCancel()"
          >
            取消
          </button>
        </tr>
      </table>
    </ng-template>
  </ng-container>
</nz-modal>
