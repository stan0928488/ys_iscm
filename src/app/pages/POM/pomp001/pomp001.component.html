<div class="background">
  <nz-content style="margin: 0 16px">
    <div style="padding: 10px 0px 10px 8px">
      <nz-breadcrumb class="breadcrumbContainer" nzSeparator=">">
        <nz-breadcrumb-item>生產訂單</nz-breadcrumb-item>
        <nz-breadcrumb-item>假分配(POMP001)</nz-breadcrumb-item>
      </nz-breadcrumb>
    </div>

    <nz-spin nzTip="Loading..." [nzSize]="'large'" [nzSpinning]="isSpinning">
      <div class="search-area">
        <span class="search">合併單號</span>
        <nz-select
          class="merge-no-select"
          nzAllowClear
          nzPlaceHolder="請選擇合併單號"
          nzShowSearch
          style="width: 160px"
          [(ngModel)]="selectedMergeNo"
          (ngModelChange)="onMergeNoSelectChange($event)"
        >
          <nz-option
            *ngFor="let merge_no of mergeNoList"
            [nzLabel]="merge_no"
            [nzValue]="merge_no"
          ></nz-option>
        </nz-select>
      </div>
      <div class="divTwo">
        <!-- 保存 -->
        <button
          class="buttonOne"
          nz-button
          nzType="primary"
          (click)="updateMergeRollOrder()"
          disabled="{{ !isCellValueChanged }}"
        >
          保存
        </button>

        <!-- 結案 -->
        <button
          class="buttonOne"
          nz-button
          nzType="primary"
          (click)="closeMergeRollOrder()"
          disabled="{{ !isCanCloseMergeRollOrder() }}"
        >
          0R 結案
        </button>


        <!-- <button class="buttonOne" nz-button nzType="primary" (click)="getGridRowData()">
          <span nz-icon nzTheme="outline" nzType="search"></span>
          getGridRowData
        </button> -->
      </div>
      <ag-grid-angular
        style="width: 100%; height: calc(100vh - 220px)"
        class="ag-theme-alpine"
        [rowData]="datalist"
        [columnDefs]="columnDefs"
        (gridReady)="onGridReady($event)"
        (rowDragEnd)="onRowDragEnd($event)"
        [rowDragManaged]="true"
        [animateRows]="true"
        [suppressMoveWhenRowDragging]="true"
        [columnTypes]="columnTypes"
        (cellValueChanged)="onCellValueChanged($event)"
        (firstDataRendered)="onFirstDataRendered($event)"
      >
      </ag-grid-angular>
    </nz-spin>
  </nz-content>
</div>
