
<div nz-row style="background-color: white; padding: 10px 10px; margin:5px 5px;">
  <div nz-col nzSpan="18">
   <span ><input style="width:120px; margin-left:15px;" type="text" nz-input placeholder="作業名"  [(ngModel)]="searchParam.tsName" /></span>
   <span>
    <nz-select style="width:300px; margin-left:15px;" nzMode="tags" nzPlaceHolder="交談方向" [(ngModel)]="searchParam.tsiType">
      <nz-option *ngFor="let option of listOfOption" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
    </nz-select>
   </span>
   <span style="margin-left:15px;">
    <button nz-button (click)="queryBtnFun()" nzType="primary" nzShape="circle"><span nz-icon nzType="search"></span></button>
   </span>

  </div>
  <div nz-col nzSpan="6" style="text-align: right;">
    <button nz-button nzType="primary"  (click)="AddFunc()">
      <span>新增</span>
    </button>
  </div>
</div>

<nz-table #basicTable [nzData]="tbData">
  <thead>
    <tr>
      <th *ngFor="let header of  tbHeader">{{header.label}}</th>
    </tr>
  </thead>
  <tbody *ngIf="tbData">
    <ng-container *ngFor="let data of basicTable.data ; let i = index">
    <tr>
      <td>{{i + 1}}</td>
      <td>{{data.tsName}}</td>
      <td>{{data.tsiSort}}</td>
      <td>{{data.tsiCode}}</td>
      <td>{{data.tsiName}}</td>
      <td>{{data.tsiType}}</td>
      <td>{{data.rmsCode}}</td>
      <td>{{data.previous}}</td>
      <td>{{data.next}}</td>
      <td>{{data.services}}</td>
      <!-- <td>{{data.tsiError}}</td> -->
      <th> <a (click)="editData(data.id)">修改</a>
        <nz-divider nzType="vertical"></nz-divider>
        <a (click)="showDeleteConfirm(data.id)">刪除</a>
    </tr>
  </ng-container>

  </tbody>
</nz-table>

<nz-modal
[(nzVisible)]="addModal.isVisible"
[nzTitle]="modalTitle"
[nzContent]="modalContent"
[nzFooter]="modalFooter"
>
<ng-template #modalTitle>{{addModal.title}}</ng-template>

<ng-template #modalContent>
  <div>
    <form nz-form [formGroup]="validateForm">
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="tsName">交談作業</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="交談作業不能為空">
          <input nz-input formControlName="tsName" id="tsName" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="tsiSort">排序</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="排序不能為空">
          <input nz-input formControlName="tsiSort" id="tsiSort" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="tsiCode">交談單元碼</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="交談單元碼不能為空">
          <input nz-input formControlName="tsiCode" id="tsiCode" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="tsiName">交談單元</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="交談作業不能為空">
          <input nz-input formControlName="tsiName" id="tsiName" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="tsiType">交談方向</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="交談作業不能為空">
          <input nz-input formControlName="tsiType" id="tsiType" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="rmsCode">交談訊息碼</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="交談訊息碼不能為空">
          <input nz-input formControlName="rmsCode" id="rmsCode" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="previous">上個交談</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="上個交談不能為空">
          <input nz-input formControlName="previous" id="previous" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="next">下個交談</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="下個交談不能為空">
          <input nz-input formControlName="next" id="next" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="services">服務</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="下個交談不能為空">
          <input nz-input formControlName="services" id="services" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="tsiError">錯誤碼</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24"  nzErrorTip="錯誤碼不能為空">
          <input nz-input formControlName="tsiError" id="tsiError" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item >
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="remark">備註</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="下個交談不能為空">
          <input nz-input formControlName="remark" id="remark" />
        </nz-form-control>
      </nz-form-item>
     
      </form>
   </div>
</ng-template>
<ng-template #modalFooter>
  <button nz-button nzType="default" (click)="changeModal()">关闭</button>
  <button nz-button nzType="primary" (click)="saveFun()" [nzLoading]="addModal.modalLoading">保存</button>
</ng-template>
